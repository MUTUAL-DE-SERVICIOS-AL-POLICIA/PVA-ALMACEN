#request-urls{data: {'get-subarticles' => get_subarticles_subarticles_path(format: :json, q: '%QUERY'), 'get-suppliers' => get_suppliers_note_entries_path(format: :json, q: '%QUERY')}}

.page-header{data: {action: 'request'}}
  %h2= t("note_entries.title.new")

= simple_form_for @note_entry, html: { class: 'form-horizontal' } do |f|
  = f.input :supplier_id, as: :hidden
  = f.input :total, as: :hidden
  .row
    .col-sm-12.col-md-8.col-lg-8
      .form-group
        %label.col-sm-3.col-md-3.col-lg-3.control-label= NoteEntry.human_attribute_name('supplier_id')
        .col-xs-9.col-sm-9.col-md-9
          = text_field_tag :supplier, '', class: 'form-control'
  .row
    .col-sm-12.col-md-8.col-lg-8
      = f.input :delivery_note_number
    .col-sm-12.col-md-4.col-lg-4
      = f.input :delivery_note_date, as: :string, input_html: { value: I18n.l(Time.now.to_date), class: 'note_entry_date date' }, label: false
  .row
    .col-sm-12.col-md-8.col-lg-8
      = f.input :invoice_number
    .col-sm-12.col-md-4.col-lg-4
      = f.input :invoice_date, as: :string, input_html: { value: I18n.l(Time.now.to_date), class: 'note_entry_date date' }, label: false
  .row
    .col-sm-12.col-md-8.col-lg-8
      .form-group
        %label.col-sm-3.col-md-3.col-lg-3.control-label= t('activerecord.models.subarticle')
        .col-xs-9.col-sm-9.col-md-9
          = text_field_tag :subarticle, '', id: 'subarticle', class: 'form-control'
    .col-xs-1.col-sm-4.col-md-4
      .form-group
        .col-sm-4.col-md-4.col-lg-4
          %button.btn.btn-default{type: "button", title: "Limpiar texto", id: "clean_text"}
            %span.glyphicon.glyphicon-refresh

  %table.table.table-bordered
    %thead
      %tr
        %th{rowspan: "2"} CANTIDAD
        %th{rowspan: "2"} UNIDAD
        %th{rowspan: "2"} CODIGO
        %th{rowspan: "2"} DETALLE
        %th{colspan: "2"} IMPORTE
        %th{rowspan: "2"}
      %tr
        %th UNITARIO
        %th TOTAL
    %tbody#subarticles
      %tr
        %td
        %td
        %td
        %th TOTAL
        %th
        %th#totalNoteEntry


  = render 'shared/form_buttons'


%script{ type: 'text/html', id: 'new_request' }
  %tr{ id: '{{id}}' }
    %td.col-sm-1.col-md-1.note= text_field_tag "note_entry[entry_subarticles_attributes][{{id}}][amount]", nil, {id:"amount_{{id}}", class: 'form-control amount', placeholder: 'cantidad'}
    %td {{unit}}
    %td {{code}}
    %td {{description}}
    %td.col-sm-2.col-md-2.note= text_field_tag "note_entry[entry_subarticles_attributes][{{id}}][unit_cost]", nil, {id:"unit_cost_{{id}}", class: 'form-control unit_cost', placeholder: 'precio unitario'}
    %td.col-sm-2.col-md-2.note= text_field_tag "note_entry[entry_subarticles_attributes][{{id}}][total_cost]", nil, {id:"total_cost_{{id}}", class: 'form-control total_cost'}
    %td{style: "display: none;"}= hidden_field_tag "note_entry[entry_subarticles_attributes][{{id}}][subarticle_id]", '{{id}}'
    %td
      %span.glyphicon.glyphicon-remove.pointer{ title: 'Eliminar' }
