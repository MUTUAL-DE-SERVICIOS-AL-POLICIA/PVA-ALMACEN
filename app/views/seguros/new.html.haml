#seguros-urls{ data: {'seguros' => api_seguros_url,
                      'seguro' => seguros_url, 
                      'proveedores' => proveedores_api_seguros_url(format: :json, q: '%QUERY')}}

.row{data: {action: 'seguros'}}
  .col-md-12
    %h3.text-center Ingreso de Seguros

%form#factura-form.form-horizontal{role: 'form'}
  .form-group
    %label.col-sm-2.control-label Proveedor
    .col-sm-3
      = text_field_tag 'proveedor', @seguro.proveedor_nombre, class: 'form-control proveedor-auto', placeholder: 'Proveedor'
    .col-sm-3
      = text_field_tag 'nit', @seguro.proveedor_nit, class: 'form-control', placeholder: 'NIT proveedor', disabled: true
    .col-sm-3
      = text_field_tag 'telefono', @seguro.proveedor_telefono, class: 'form-control', placeholder: 'Teléfonos proveedor', disabled: true
  .form-group
    %label.col-sm-2.control-label Factura
    .col-sm-3
      = text_field_tag 'factura_numero', @seguro.factura_numero, class: 'form-control', placeholder: 'Número de factura'
    .col-sm-3
      = text_field_tag 'factura_autorizacion', @seguro.factura_autorizacion, class: 'form-control', placeholder: 'Número autorización'
    .col-sm-3
      .input-group
        = text_field_tag 'factura_fecha', format_date(@seguro.factura_fecha), class: 'form-control date', placeholder: 'Fecha factura'
        .input-group-addon
          %span.glyphicon.glyphicon-calendar
  .form-group
    %label.col-sm-2.control-label Número de contrato
    .col-sm-3
      = text_field_tag 'numero_contrato', @seguro.numero_contrato, class: 'form-control', placeholder: 'Número de contrato'
    .col-sm-3
      .input-group
        = text_field_tag 'fecha_inicio_vigencia', format_date(@seguro.factura_fecha), class: 'form-control date', placeholder: 'Fecha inicio vigencia'
        .input-group-addon
          %span.glyphicon.glyphicon-calendar
    .col-sm-3
      .input-group
        = text_field_tag 'fecha_fin_vigencia', format_date(@seguro.factura_fecha), class: 'form-control date', placeholder: 'Fecha fin vigencia'
        .input-group-addon
          %span.glyphicon.glyphicon-calendar

.row
  .col-md-12.col-sm-12
    %form#ingresos-form{role: 'form'}
      .row.has-success
        .col-md-offset-2.col-sm-offset-2.col-xs-offset-2.col-md-6.col-sm-6.col-xs-6
          = text_field_tag :code, '', class: 'form-control input-lg', placeholder: 'Código de Barras de Activos Fijos (ej. 1-10, 12-15, 17, 20, ...)', autofocus: true
        .col-md-3.col-sm-3.col-xs-3
          = button_tag class: 'btn btn-success btn-lg' do
            %span.glyphicon.glyphicon-search
            Buscar
          = hidden_field_tag :observacion
%br/

%table#ingresos-tbl.table.table-bordered.table-striped.table-hover.table-condensed

%table#proveedor-tbl.table.table-bordered.table-striped.table-hover.table-condensed

-# TODO aún no está completo la funcionalidad de editar la nota de ingreso
-# de activos fijos
- if action_name != 'edit'
  .row
    .col-md-12.col-sm-12.text-center
      = link_to ingresos_path, class: 'btn btn-danger cancelar-btn' do
        %span.glyphicon.glyphicon-ban-circle
        Cancelar

      = button_tag class: 'btn btn-primary guardar-btn', data: {disable_with: 'Guardando...'} do
        %span.glyphicon.glyphicon-floppy-save
        Guardar

#confirm-modal
//= render 'ingreso_modal'

%script{type: 'text/html', id: 'tpl-activo-seleccionado'}
  %thead
    %tr
      %th.text-center
        %strong.badge{title: 'Total'} {{cantidad}}
      %th.text-center Código
      %th Descripción
  %tbody
    {{#activos}}
    %tr
      %td.text-center {{indice}}
      %td.text-center {{barcode}}
      %td {{description}}
    {{/activos}}
